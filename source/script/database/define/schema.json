[
    {
        "file": "./assets/database/platform.db",
        "flags": [
            "enable-wal-mode"
        ],
        "targets": [
            "table", "index"
        ], 
        "options": {
            "tables": [
                {
                    "name": "videos",
                    "options": {
                        "flags": [
                            "if-not-exists"
                        ],
                        "column": [
                            {
                                "name": "id",
                                "type": "integer",
                                "flags": [
                                    "primary-key",
                                    "auto-increment"
                                ]
                            },
                            {
                                "name": "exterior",
                                "type": "text",
                                "flags": [
                                    "not-null", "unique"
                                ]
                            },
                            {
                                "name": "title",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "uploader_id",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "duration",
                                "type": "integer",
                                "default": 0
                            },
                            {
                                "name": "page_count",
                                "type": "integer",
                                "default": 0
                            },
                            {
                                "name": "thumbnail",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "update_count",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "created_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "published_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "updated_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "recorded_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            }
                        ]
                    }
                },
                {
                    "name": "uploaders",
                    "options": {
                        "flags": [
                            "if-not-exists"
                        ],
                        "column": [
                            {
                                "name": "id",
                                "type": "integer",
                                "flags": [
                                    "primary-key",
                                    "auto-increment"
                                ]
                            },
                            {
                                "name": "exterior",
                                "type": "integer",
                                "flags": [
                                    "not-null", "unique"
                                ]
                            },
                            {
                                "name": "username",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "avatar",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "update_count",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "updated_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "recorded_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            }
                        ]
                    }
                },
                {
                    "name": "batches",
                    "options": {
                        "flags": [
                            "if-not-exists"
                        ],
                        "column": [
                            {
                                "name": "id",
                                "type": "integer",
                                "flags": [
                                    "primary-key",
                                    "auto-increment"
                                ]
                            },
                            {
                                "name": "video_count",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "started_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "ended_at",
                                "type": "text"
                            },
                            {
                                "name": "recorded_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            }
                        ]
                    }
                },
                {
                    "name": "snapshots",
                    "options": {
                        "flags": [
                            "if-not-exists"
                        ],
                        "column": [
                            {
                                "name": "id",
                                "type": "integer",
                                "flags": [
                                    "primary-key",
                                    "auto-increment"
                                ]
                            },
                            {
                                "name": "vid",
                                "type": "integer",
                                "flags": [
                                    "not-null", "unique"
                                ]
                            },
                            {
                                "name": "count_view",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "count_like",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "count_coin",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "count_favorite",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "batch_id",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "snapshot_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            }
                        ]
                    }
                },
                {
                    "name": "groups",
                    "options": {
                        "flags": [
                            "if-not-exists"
                        ],
                        "column": [
                            {
                                "name": "id",
                                "type": "integer",
                                "flags": [
                                    "primary-key",
                                    "auto-increment"
                                ]
                            },
                            {
                                "name": "type",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "name",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "desc",
                                "type": "text"
                            },
                            {
                                "name": "count",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "modified_at",
                                "type": "text"
                            },
                            {
                                "name": "created_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            }
                        ]
                    }
                },
                {
                    "name": "video_group",
                    "options": {
                        "flags": [
                            "if-not-exists"
                        ],
                        "column": [
                            {
                                "name": "id",
                                "type": "integer",
                                "flags": [
                                    "primary-key",
                                    "auto-increment"
                                ]
                            },
                            {
                                "name": "vid",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "gid",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "is_expried",
                                "type": "integer",
                                "default": 0
                            },
                            {
                                "name": "expired_at",
                                "type": "text"
                            },
                            {
                                "name": "created_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            }
                        ]
                    }
                },
                {
                    "name": "uploader_group",
                    "options": {
                        "flags": [
                            "if-not-exists"
                        ],
                        "column": [
                            {
                                "name": "id",
                                "type": "integer",
                                "flags": [
                                    "primary-key",
                                    "auto-increment"
                                ]
                            },
                            {
                                "name": "uid",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "gid",
                                "type": "integer",
                                "flags": [
                                    "not-null"
                                ]
                            },
                            {
                                "name": "is_expried",
                                "type": "integer",
                                "default": 0
                            },
                            {
                                "name": "expired_at",
                                "type": "text"
                            },
                            {
                                "name": "created_at",
                                "type": "text",
                                "flags": [
                                    "not-null"
                                ]
                            }
                        ]
                    }
                }
            ],
            "indexes": [
                {
                    "name": "videos_exterior_idx",
                    "table": "videos",
                    "options": {
                        "flags": [
                            "unique", "if-not-exists"
                        ],
                        "column": [
                            "exterior"
                        ]
                    }
                },
                {
                    "name": "uploaders_exterior_idx",
                    "table": "uploaders",
                    "options": {
                        "flags": [
                            "unique", "if-not-exists"
                        ],
                        "column": [
                            "exterior"
                        ]
                    }
                },
                {
                    "name": "video_group_vid_gid_idx",
                    "table": "video_group",
                    "options": {
                        "flags": [
                            "if-not-exists"
                        ],
                        "column": [
                            "vid", "gid"
                        ]
                    }
                },
                {
                    "name": "uploader_group_uid_gid_idx",
                    "table": "uploader_group",
                    "options": {
                        "flags": [
                            "if-not-exists"
                        ],
                        "column": [
                            "uid", "gid"
                        ]
                    }
                }
            ]
        }
    }
]